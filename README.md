# Watch Films

Веб-приложение для удобного просмотра фильмов на двух мониторах. Использует Kinopoisk API для получения информации и Kinobox для воспроизведения.

## Особенности

- Автоматическое открытие фильма на основном мониторе
- Отображение информации о фильме на втором мониторе
- Динамичный фон с кадрами из фильма
- Адаптивный интерфейс с поддержкой логотипов фильмов
- Умная система кэширования для быстрой работы
- Автоматическая блокировка рекламы

## Требования

- Windows с двумя мониторами
- Google Chrome
- Node.js 14.x или выше
- Расширения для блокировки рекламы (опционально)

## Установка

1. Клонируйте репозиторий:

```bash
git clone [url-репозитория]
cd watch-films
```

2. Установите зависимости:

```bash
npm install
```

3. Настройте config.js:

```javascript
{
  server: {
    port: 3060,
    host: "0.0.0.0",
    baseUrl: "http://localhost:3060"
  },
  kinopoisk: {
    apiKey: "ВАШ_КЛЮЧ" // Получить на https://kinopoisk.dev
  },
  monitors: {
    count: 2,          // Количество мониторов
    positions: {
      main: 0,         // Позиция основного монитора
      secondary: -1920 // Позиция второго монитора
    }
  },
  debug: {
    useMockData: false // Использование тестовых данных
  },
  paths: {
    extensions: [     // Пути к расширениям Chrome
      "путь/к/adblock",
      "путь/к/adguard"
    ]
  }
}
```

## API Endpoints

### GET /watch

Страница просмотра фильма через Kinobox плеер.

- Параметры: `id` - ID фильма на Кинопоиске
- Пример: `/watch?id=123456`

### GET /info

Информационная страница с описанием фильма, включает:

- Название и логотип
- Рейтинг и год выпуска
- Жанр и страну
- Краткое описание
- Динамичный фон с кадрами

### POST /command

Управление просмотром фильма. Поддерживаемые команды:

- `searchMovie`: Поиск и запуск фильма
  ```json
  { "command": "searchMovie", "name": "Название фильма" }
  ```
- `closeMovie`: Закрытие всех окон просмотра
  ```json
  { "command": "closeMovie" }
  ```
- `isMovieOpened`: Проверка активного просмотра
  ```json
  { "command": "isMovieOpened" }
  ```

## Структура проекта

```
watch-films/
├── src/
│   ├── app/
│   │   ├── controllers/   # Обработчики запросов
│   │   ├── services/      # Сервисы (Kinopoisk, Puppeteer)
│   │   └── views/         # Шаблоны и статические файлы
│   │       ├── assets/    # CSS, JS, изображения
│   │       └── *.ejs      # EJS шаблоны
│   ├── app.js            # Точка входа
│   └── server.js         # Настройки сервера
├── config.js             # Конфигурация
└── package.json          # Зависимости
```

## Дополнительные возможности

### Кэширование

- Автоматическое кэширование данных фильмов
- Кэширование результатов поиска
- Настраиваемое время жизни кэша

### Фоновые изображения

- Автоматическая загрузка кадров из фильма
- Плавные переходы между изображениями
- Адаптивная скорость смены кадров в зависимости от длительности фильма

### Расширения Chrome

- Поддержка AdBlock и AdGuard
- Автоматическое определение путей к расширениям
- Блокировка нежелательной рекламы в плеере
