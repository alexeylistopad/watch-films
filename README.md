# Watch Films

Веб-приложение для удобного просмотра фильмов на двух мониторах. Использует Kinopoisk API для получения информации и Kinobox для воспроизведения.

## Особенности

- Автоматическое открытие фильма на основном мониторе
- Отображение информации о фильме на втором мониторе
- Автоматическая смена фоновых изображений из кадров фильма
- Поддержка высококачественных постеров и логотипов фильмов
- Работа в полноэкранном режиме на обоих мониторах

## Требования

- Windows с двумя мониторами
- Google Chrome
- Node.js 14.x или выше

## Установка

1. Клонируйте репозиторий:

```bash
git clone [url-репозитория]
cd watch-films
```

2. Установите зависимости:

```bash
npm install
```

3. Настройте конфигурацию в `config.js`:
   - Укажите API ключ Kinopoisk (получить на https://kinopoisk.dev)
   - Настройте позиции мониторов в `monitors.positions`
   - При необходимости отключите тестовые данные `debug.useMockData: false`

## Запуск

```bash
npm start
```

Откройте в браузере: http://localhost:3060

## Настройка брандмауэра

Для доступа к приложению по сети:

1. Откройте "Брандмауэр Защитника Windows"
2. Выберите "Дополнительные параметры" → "Правила для входящего подключения"
3. Создайте новое правило:
   - Тип: "Для порта"
   - Протокол: TCP
   - Порт: 3060 (или ваш из config.js)
   - Действие: "Разрешить подключение"
   - Профиль: все (Доменный, Частный, Публичный)
   - Имя: "Watch Films App"

После настройки приложение будет доступно по адресу: http://<IP-адрес>:3060

## Структура проекта

```
watch-films/
├── src/
│   ├── app/
│   │   ├── controllers/   # Обработка команд
│   │   ├── services/      # Работа с API и браузером
│   │   └── views/         # Шаблоны страниц
│   ├── utils/            # Вспомогательные функции
│   └── app.js           # Точка входа
└── config.js            # Настройки приложения
```

## API Endpoints

- `GET /watch` - страница просмотра фильма
- `GET /info` - информация о фильме
- `POST /command` - управление просмотром:
  - `searchMovie` - поиск и запуск фильма
  - `closeAllBrowsers` - закрытие окон просмотра
  - `isMovieOpened` - проверка активного просмотра

## Настройка мониторов

В `config.js` настройте параметры мониторов:

```js
monitors: {
  count: 2,          // Количество используемых мониторов (1 или 2)
  positions: {
    main: 0,         // Основной монитор
    secondary: -1920, // Второй монитор слева (-1920px)
  }
}
```

При использовании одного монитора (`count: 1`) приложение будет открывать
только окно с фильмом на основном мониторе.
